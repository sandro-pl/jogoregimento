<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo do Regimento Educacional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #ff7b00;
            background: linear-gradient(90deg, rgba(255, 123, 0, 1) 0%, rgba(255, 255, 255, 1) 50%, rgba(30, 0, 255, 1) 100%);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex-grow: 1;
        }
        .board-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 6px;
        }
        .board-space {
            aspect-ratio: 1 / 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            cursor: pointer;
        }
        .board-space:hover {
            transform: scale(1.05);
        }
        .player-pawn {
            width: 25%;
            height: 25%;
            border-radius: 50%;
            position: absolute;
            transition: all 0.5s ease-in-out;
            border: 2px solid white;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        .space-start { background-color: #005594; color: white; } /* Azul Senac */
        .space-finish { background-color: #f08324; color: white; } /* Laranja Senac */
        .space-sorte { background-color: #4ade80; color: white; } /* Verde */
        .space-reves { background-color: #f87171; color: white; } /* Vermelho */
        .space-quiz { background-color: #ffffff; color: #818cf8; } /* Branco com √≠cone roxo */
        .space-decisao { background-color: #fb923c; color: white; } /* Laranja claro */
        .space-evento { background-color: #7dd3fc; color: white; } /* Azul claro */
        
        #dice-face {
            width: 80px;
            height: 80px;
            background-color: white;
            border-radius: 12px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .dot {
            width: 16px;
            height: 16px;
            background-color: #333;
            border-radius: 50%;
            place-self: center;
            visibility: hidden;
        }
        .dice-1 .dot:nth-child(5) { visibility: visible; }
        .dice-2 .dot:nth-child(1), .dice-2 .dot:nth-child(9) { visibility: visible; }
        .dice-3 .dot:nth-child(1), .dice-3 .dot:nth-child(5), .dice-3 .dot:nth-child(9) { visibility: visible; }
        .dice-4 .dot:nth-child(1), .dice-4 .dot:nth-child(3), .dice-4 .dot:nth-child(7), .dice-4 .dot:nth-child(9) { visibility: visible; }
        .dice-5 .dot:nth-child(1), .dice-5 .dot:nth-child(3), .dice-5 .dot:nth-child(5), .dice-5 .dot:nth-child(7), .dice-5 .dot:nth-child(9) { visibility: visible; }
        .dice-6 .dot:nth-child(1), .dice-6 .dot:nth-child(3), .dice-6 .dot:nth-child(4), .dice-6 .dot:nth-child(6), .dice-6 .dot:nth-child(7), .dice-6 .dot:nth-child(9) { visibility: visible; }
        
        .modal {
            transition: opacity 0.3s ease;
        }
        
        .player-info.active {
            border: 4px solid #f08324;
            transform: scale(1.05);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <main class="flex-grow">
        <div id="game-setup" class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-lg text-center">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Senac_logo.svg/1200px-Senac_logo.svg.png" alt="Logo Senac" class="h-12 mx-auto mb-6">
            <h1 class="text-3xl font-bold text-[#005594] mb-2">Jogo do Regimento Educacional</h1>
            <p class="text-gray-600 mb-6">Responda quizzes, resolva puzzles e some pontos!</p>
            <div class="mb-4">
                <label for="player-count" class="block text-lg font-medium text-gray-700 mb-2">Quantos jogadores?</label>
                <select id="player-count" class="w-full p-2 border border-gray-300 rounded-md">
                    <option value="2">2 Jogadores</option>
                    <option value="3">3 Jogadores</option>
                    <option value="4">4 Jogadores</option>
                </select>
            </div>
            <div id="player-names" class="space-y-3 mb-6"></div>
            <button id="start-game-btn" class="w-full bg-[#f08324] text-white py-3 px-4 rounded-lg font-bold text-lg hover:bg-orange-600 transition">Iniciar Jogo</button>
        </div>

        <div id="game-container" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 bg-white p-4 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold text-center text-[#005594] mb-4">Tabuleiro</h2>
                    <div id="board" class="board-grid p-2 bg-gray-200 rounded-lg"></div>
                    <!-- Legenda adicionada aqui -->
                    <div id="legend" class="mt-4 flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-sm text-gray-600">
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 rounded-full flex items-center justify-center font-bold space-quiz">‚ùì</div>
                            <span>Quiz</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 rounded-full flex items-center justify-center font-bold space-sorte text-white">‚≠ê</div>
                            <span>Sorte</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 rounded-full flex items-center justify-center font-bold space-reves text-white">‚ö†Ô∏è</div>
                            <span>Rev√©s</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 rounded-full flex items-center justify-center font-bold space-decisao text-white">üß≠</div>
                            <span>Decis√£o</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 rounded-full flex items-center justify-center font-bold space-evento text-white">üìÖ</div>
                            <span>Evento</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-center text-[#005594] mb-4">Painel de Controle</h2>
                        <div id="players-panel" class="space-y-4 mb-6"></div>
                    </div>
                    <div class="text-center">
                        <p id="turn-info" class="text-lg font-semibold mb-4">√â a vez de...</p>
                        <div class="flex justify-center mb-4">
                            <div id="dice-face" class="dice-1">
                                <div class="dot"></div><div class="dot"></div><div class="dot"></div>
                                <div class="dot"></div><div class="dot"></div><div class="dot"></div>
                                <div class="dot"></div><div class="dot"></div><div class="dot"></div>
                            </div>
                        </div>
                        <button id="roll-dice-btn" class="w-full bg-[#005594] text-white py-3 px-4 rounded-lg font-bold text-lg hover:bg-blue-800 transition disabled:bg-gray-400">Lan√ßar Dado</button>
                        <button id="restart-game-btn" class="w-full mt-4 bg-gray-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-gray-600 transition">Reiniciar Jogo</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden opacity-0">
            <div id="modal-content" class="bg-white rounded-2xl shadow-2xl p-8 max-w-lg w-full text-center transform scale-95 transition-all duration-300"></div>
        </div>
    </main>
    <footer class="text-center text-gray-500 py-4 mt-auto">
        Desenvolvido por: Sandro Polizel
    </footer>

    <script>
        // --- CONFIGURA√á√ïES E DADOS DO JOGO ---
        const boardSpaces = 60;
        const playerColors = ['#ef4444', '#3b82f6', '#10b981', '#eab308'];
        const POINTS = { QUIZ_CORRECT: 15, SORTE: 30, REVES_FAIL: -25, FINISH_BONUS: 75, DECISAO_CORRETA: 25, DECISAO_INCORRETA: -15 };
        
        let puzzleTimer = null;

        const quizQuestions = [
            { question: "Qual √© a frequ√™ncia m√≠nima obrigat√≥ria para ser aprovado?", options: ["50%", "70%", "75%", "85%"], correct: 2 },
            { question: "Qual setor emite Diplomas e Hist√≥ricos?", options: ["Setor T√©cnico", "Biblioteca", "Dire√ß√£o", "Secretaria Escolar"], correct: 3 },
            { question: "Qual das op√ß√µes N√ÉO √© uma medida reparadora prevista?", options: ["Advert√™ncia", "Suspens√£o", "Multa financeira", "Desligamento"], correct: 2 },
            { question: "Qual o prazo para solicitar revis√£o de nota?", options: ["20 dias corridos", "A qualquer momento", "7 dias √∫teis", "No pr√≥ximo semestre"], correct: 0 },
            { question: "Para obter o diploma de um curso T√©cnico, o que √© preciso comprovar?", options: ["Ser maior de 21", "Conclus√£o do Ensino M√©dio", "Carta de recomenda√ß√£o", "Est√°gio n√£o obrigat√≥rio"], correct: 1 },
            { question: "Qual inst√¢ncia √© o √∫ltimo recurso para revis√£o de notas?", options: ["Dire√ß√£o", "Setor T√©cnico", "Conselho Escolar", "Supervis√£o Educacional"], correct: 2 },
            { question: "Segundo o Regimento, √© um DEVER do estudante:", options: ["Usar a biblioteca todo dia", "Ser votado para representante", "Preservar o patrim√¥nio", "Participar de todas as pautas"], correct: 2 },
            { question: "Quando √© permitida a presen√ßa de n√£o estudantes nos ambientes do Senac?", options: ["Se forem familiares", "Nos fins de semana", "Quando a atividade educacional exigir", "Nunca"], correct: 2 },
            { question: "√â poss√≠vel usar Nome Social na matr√≠cula?", options: ["N√£o, apenas o nome de registro", "Sim, mediante apresenta√ß√£o de documento", "Apenas para cursos EAD", "Apenas com autoriza√ß√£o judicial"], correct: 1},
            { question: "Um aluno que se afasta por motivo de sa√∫de pode ter amparo legal para as faltas?", options: ["N√£o, as faltas s√£o sempre contadas", "Sim, atrav√©s de regime escolar especial", "Apenas se for atleta", "Apenas se pagar uma taxa"], correct: 1},
            { question: "O que acontece se um aluno n√£o fizer a rematr√≠cula no Ensino M√©dio T√©cnico?", options: ["Nada, a vaga √© garantida", "Recebe uma advert√™ncia", "√â transferido de turma", "Perde o direito √† vaga por evas√£o"], correct: 3},
            { question: "Quem √© respons√°vel por mediar a rela√ß√£o da turma com os docentes e a coordena√ß√£o?", options: ["O diretor da unidade", "O bibliotec√°rio", "O representante estudantil", "Qualquer aluno pode mediar"], correct: 2},
            { question: "O que significa a sigla 'BNCC' mencionada no Regimento?", options: ["Banco Nacional de Cursos e Certificados", "Base Nacional Comum Curricular", "Bloco de Normas de Conviv√™ncia Comunit√°ria", "Biblioteca Nacional Central de Cursos"], correct: 1},
            { question: "O que √© o 'Plano de Curso'?", options: ["O mapa da unidade", "O calend√°rio de provas", "Um documento com as notas", "Documento que sistematiza o planejamento do curso"], correct: 3},
            { question: "A pr√°tica de bullying ou cyberbullying √© uma infra√ß√£o ao regimento?", options: ["N√£o, √© considerado um problema pessoal", "Sim, e pode levar a medidas reparadoras", "Apenas se ocorrer fora da sala de aula", "Depende da idade do aluno"], correct: 1},
            { question: "Para qual tipo de curso o Senac emite um 'Certificado' em vez de 'Diploma'?", options: ["Ensino M√©dio T√©cnico", "Apenas cursos de alta carga hor√°ria", "Forma√ß√£o Inicial e Continuada", "Apenas cursos pagos"], correct: 2},
            { question: "Quem pode ser convidado para uma reuni√£o do Conselho Escolar, mesmo sem direito a voto?", options: ["Ningu√©m, a composi√ß√£o √© fixa", "Apenas diretores de outras unidades", "Especialistas ou respons√°veis legais", "Apenas ex-alunos"], correct: 2},
            { question: "Como um aluno pode solicitar o cancelamento de sua matr√≠cula?", options: ["Apenas por carta registrada", "Por requerimento na Secretaria ou no site", "Informando verbalmente ao professor", "Enviando um e-mail para a Dire√ß√£o Regional"], correct: 1},
            { question: "A men√ß√£o 'ND' significa:", options: ["Nota Dez", "Nada a Declarar", "N√£o Desenvolvida", "Necessita de Dedica√ß√£o"], correct: 2},
            { question: "Os documentos escolares emitidos pelo Senac t√™m validade em qual territ√≥rio?", options: ["Apenas na cidade da unidade", "Apenas no estado de S√£o Paulo", "Em todo o territ√≥rio nacional", "No Mercosul"], correct: 2},
            { question: "Quem √© o profissional respons√°vel pela Biblioteca?", options: ["O coordenador pedag√≥gico", "Um funcion√°rio administrativo", "O bibliotec√°rio", "Um docente volunt√°rio"], correct: 2},
            { question: "A matr√≠cula pode ser cancelada pela institui√ß√£o se...", options: ["O aluno tirar uma nota baixa", "N√£o houver n√∫mero m√≠nimo de alunos para a turma", "O aluno se atrasar para uma aula", "O aluno pedir transfer√™ncia"], correct: 1},
            { question: "O uso de recursos tecnol√≥gicos da institui√ß√£o deve seguir qual pol√≠tica interna?", options: ["A Pol√≠tica de Descontos", "A Pol√≠tica de Est√°gios", "A Pol√≠tica de Seguran√ßa da Informa√ß√£o", "A Pol√≠tica de Eventos"], correct: 2},
            { question: "Ao final de um curso de Qualifica√ß√£o Profissional, o aluno recebe qual documento?", options: ["Diploma", "Declara√ß√£o de Participa√ß√£o", "Certificado", "Hist√≥rico Escolar apenas"], correct: 2},
            { question: "Qual a miss√£o do Senac S√£o Paulo, segundo o Art. 2¬∫?", options: ["Educar para a tecnologia", "Educar para o trabalho em com√©rcio, bens e servi√ßos", "Oferecer apenas cursos gratuitos", "Fomentar o empreendedorismo social"], correct: 1 },
            { question: "Um aluno emancipado (menor de 18 anos) pode fazer a pr√≥pria matr√≠cula?", options: ["Sim, para qualquer curso", "N√£o, precisa sempre do respons√°vel", "Sim, desde que o curso n√£o exija maioridade", "Apenas com autoriza√ß√£o do Conselho Escolar"], correct: 2 },
            { question: "O que acontece com a vaga de um aluno que n√£o realiza a rematr√≠cula obrigat√≥ria?", options: ["A vaga √© mantida por mais um semestre", "O aluno √© automaticamente transferido", "Perde o direito √† vaga por evas√£o", "Recebe uma suspens√£o"], correct: 2 },
            { question: "O est√°gio obrigat√≥rio pode ser aproveitado se o aluno j√° trabalha na √°rea?", options: ["N√£o, deve ser cumprido integralmente", "Sim, mediante comprova√ß√£o das atividades", "Apenas se for em empresa parceira", "Apenas com 50% da carga hor√°ria"], correct: 1 },
            { question: "Quem preside as reuni√µes do Conselho Escolar, conforme o Art. 13?", options: ["O Diretor da Unidade", "Um dos estudantes", "O Secret√°rio Escolar", "Um dos docentes"], correct: 3 },
            { question: "√â garantido o direito √† amamenta√ß√£o para estudantes lactantes?", options: ["Sim, em espa√ßos adequados indicados pela unidade", "N√£o, o regimento n√£o prev√™", "Apenas se a aluna trouxer um atestado", "Apenas fora do hor√°rio de aula"], correct: 0 },
            { question: "Qual a qualifica√ß√£o m√≠nima para um diretor de unidade, segundo o regimento?", options: ["Qualquer curso superior", "Apenas Doutorado em Educa√ß√£o", "Gradua√ß√£o em Pedagogia, licenciatura ou especializa√ß√£o em educa√ß√£o", "Experi√™ncia de 10 anos em gest√£o"], correct: 2 },
            { question: "O Senac pode realizar parcerias com outras empresas ou organiza√ß√µes?", options: ["N√£o, √© proibido por lei", "Sim, para oferta de cursos e est√°gios", "Apenas com organiza√ß√µes internacionais", "Apenas para eventos culturais"], correct: 1 },
            { question: "O que o regimento diz sobre portar armas nos ambientes da Unidade Educacional?", options: ["√â permitido para maiores de 21 anos", "√â permitido se tiver porte de arma", "N√£o √© permitido, salvo exce√ß√µes previstas em lei", "√â permitido apenas para a equipe de seguran√ßa"], correct: 2 },
            { question: "A men√ß√£o 'ED' (Em Desenvolvimento) pode ser atribu√≠da como men√ß√£o final de uma compet√™ncia?", options: ["Sim, se o aluno tiver boa frequ√™ncia", "N√£o existe a men√ß√£o ED", "Sim, mas o aluno fica de recupera√ß√£o", "Depende da decis√£o do Conselho Escolar"], correct: 1 },
            { question: "Qual o prazo para a emiss√£o do diploma de um curso de Habilita√ß√£o Profissional T√©cnica?", options: ["Imediato ap√≥s o t√©rmino", "At√© 10 dias √∫teis", "At√© 30 dias √∫teis", "At√© 60 dias √∫teis"], correct: 2 },
            { question: "Um aluno maior de idade depende dos pais. O Senac pode dar informa√ß√µes sobre ele aos pais?", options: ["Sim, por serem os respons√°veis financeiros", "Apenas com autoriza√ß√£o judicial", "N√£o, exceto sob autoriza√ß√£o por escrito do aluno", "Sim, se os pais solicitarem formalmente"], correct: 2 },
            { question: "O que a sigla FIC significa no contexto dos cursos do Senac?", options: ["Forma√ß√£o Integrada Curricular", "F√≥rum de Inicia√ß√£o Cient√≠fica", "Forma√ß√£o Inicial e Continuada", "Fundo de Incentivo ao Conhecimento"], correct: 2 },
            { question: "Quem √© respons√°vel por apurar os fatos em casos que podem gerar medidas reparadoras?", options: ["Apenas o representante de turma", "Uma comiss√£o de alunos", "A equipe de gest√£o da unidade", "A supervis√£o educacional"], correct: 2 },
            { question: "O que √© um curso de Especializa√ß√£o Profissional T√©cnica?", options: ["Um curso para quem nunca trabalhou", "O mesmo que uma gradua√ß√£o", "Um curso para aprofundar compet√™ncias de uma Habilita√ß√£o T√©cnica", "Um curso preparat√≥rio para o Ensino M√©dio"], correct: 2 },
            { question: "Se o docente que atribuiu a nota n√£o puder fazer a revis√£o, quem a far√°?", options: ["O Diretor da Unidade", "Outro aluno", "O t√©cnico de √°rea respons√°vel pelo curso", "Ningu√©m, a nota se torna final"], correct: 2 },
            { question: "A Biblioteca √© respons√°vel apenas pelo empr√©stimo de livros?", options: ["Sim, sua √∫nica fun√ß√£o √© essa", "N√£o, ela tamb√©m prop√µe a√ß√µes educacionais e culturais", "Sim, e pela organiza√ß√£o das estantes", "N√£o, ela tamb√©m cuida das matr√≠culas"], correct: 1 },
            { question: "Qual o nome do modelo pedag√≥gico do Senac?", options: ["Modelo de Ensino Tradicional", "Metodologia Ativa Senac", "Modelo Pedag√≥gico Senac (MPS)", "Sistema Integrado de Aprendizagem"], correct: 2 },
            { question: "Em caso de suspens√£o, como a aus√™ncia do aluno √© registrada?", options: ["Como falta justificada", "N√£o √© registrada para n√£o prejudicar", "Como falta, com observa√ß√£o do motivo", "Como abono de presen√ßa"], correct: 2 },
            { question: "O Hist√≥rico Escolar √© emitido para cursos de Qualifica√ß√£o Profissional?", options: ["Sim, sempre junto com o certificado", "N√£o, as informa√ß√µes j√° constam no verso do certificado", "Apenas se o aluno pagar uma taxa", "Sim, mas apenas uma vers√£o simplificada"], correct: 1 },
            { question: "Para qual n√≠vel de ensino o regimento N√ÉO se aplica?", options: ["Forma√ß√£o Inicial e Continuada", "Educa√ß√£o Superior", "Ensino M√©dio T√©cnico", "T√©cnico de N√≠vel M√©dio"], correct: 1 },
            { question: "Quem delibera sobre os casos n√£o previstos no Regimento?", options: ["O conselho de turma", "A associa√ß√£o de pais e mestres", "A Supervis√£o Educacional ou outra inst√¢ncia designada", "O representante estudantil"], correct: 2 },
            { question: "O que o regimento estabelece sobre a realiza√ß√£o de atos libidinosos nas depend√™ncias do Senac?", options: ["S√£o permitidos se forem discretos", "S√£o permitidos apenas para maiores de idade", "N√£o s√£o permitidos, mesmo que consentidos", "S√£o permitidos apenas em eventos"], correct: 2 },
            { question: "Para que serve o aproveitamento de compet√™ncias?", options: ["Apenas para ganhar desconto na mensalidade", "Para continuar estudos, obter certifica√ß√£o ou revalidar diplomas", "Para abonar faltas", "Para substituir o est√°gio obrigat√≥rio"], correct: 1 },
            { question: "Qual a principal fun√ß√£o do Setor T√©cnico da unidade?", options: ["Cuidar da parte financeira", "Realizar a limpeza e manuten√ß√£o", "Planejamento, coordena√ß√£o e acompanhamento pedag√≥gico", "Apenas fazer as matr√≠culas"], correct: 2 },
            { question: "O Regimento pode ser alterado?", options: ["N√£o, √© um documento fixo", "Sim, e a vers√£o atual √© a 6, v√°lida a partir de 2025", "Apenas por vota√ß√£o popular", "Sim, a cada 10 anos"], correct: 1 }
        ];

        const puzzleChallenges = [
            { puzzle: "LUTRICAMA", solution: "MATRICULA", hint: "Ato que formaliza seu v√≠nculo com o Senac." },
            { puzzle: "LOMAPID", solution: "DIPLOMA", hint: "Documento recebido ao concluir um curso t√©cnico." },
            { puzzle: "TOCENDES", solution: "DOCENTES", hint: "Equipe respons√°vel pelo ensino." },
            { puzzle: "NERAVEDICTA", solution: "ADVERTENCIA", hint: "Uma das medidas reparadoras." },
            { puzzle: "TENCIACOMPE", solution: "COMPETENCIA", hint: "O que voc√™ desenvolve nos cursos do Senac." },
            { puzzle: "√áAAVALIAO", solution: "AVALIA√áAO", hint: "Processo cont√≠nuo para verificar seu aprendizado." },
            { puzzle: "CEQUIAFREN", solution: "FREQUENCIA", hint: "Voc√™ precisa de 75% para ser aprovado." },
            { puzzle: "GIOESTA", solution: "ESTAGIO", hint: "Ato educativo supervisionado para praticar a profiss√£o." }
        ];
        
        const decisionChallenges = [
            { 
                scenario: "Um colega oferece a senha dele para voc√™ 'adiantar' um trabalho. O que voc√™ faz?",
                options: [
                    { text: "Recusa e explica os riscos (Art. 26, IX).", correct: true },
                    { text: "Aceita e agradece a ajuda.", correct: false }
                ],
                feedback_correct: `Excelente! Respeitar a Pol√≠tica de Seguran√ßa da Informa√ß√£o √© um dever. Ganhe ${POINTS.DECISAO_CORRETA} pontos.`,
                feedback_incorrect: `Cuidado! Compartilhar senhas √© uma infra√ß√£o grave. Perca ${POINTS.DECISAO_INCORRETA} pontos.`
            },
            {
                scenario: "Voc√™ discorda de uma nota e j√° falou com o professor, mas continua insatisfeito. Qual seu pr√≥ximo passo?",
                options: [
                    { text: "Leva o caso ao Conselho Escolar (Art. 75).", correct: true },
                    { text: "Desiste de questionar.", correct: false }
                ],
                feedback_correct: `Correto! O Conselho Escolar √© a inst√¢ncia para recursos. Ganhe ${POINTS.DECISAO_CORRETA} pontos.`,
                feedback_incorrect: `N√£o desista dos seus direitos! Voc√™ pode e deve buscar as inst√¢ncias corretas. Perca ${POINTS.DECISAO_INCORRETA} pontos.`
            },
            {
                scenario: "Voc√™ acidentalmente danifica um equipamento do laborat√≥rio. Qual a sua atitude?",
                options: [
                    { text: "Comunica o professor ou t√©cnico respons√°vel imediatamente (Art. 26, X).", correct: true },
                    { text: "N√£o conta a ningu√©m e espera que ningu√©m perceba.", correct: false }
                ],
                feedback_correct: `Atitude correta! Assumir a responsabilidade preserva o patrim√¥nio de todos. Ganhe ${POINTS.DECISAO_CORRETA} pontos.`,
                feedback_incorrect: `A omiss√£o pode agravar o problema e √© contra o regimento. Perca ${POINTS.DECISAO_INCORRETA} pontos.`
            },
            {
                scenario: "Um colega est√° pensando em desistir do curso por dificuldades. O que voc√™ o orienta a fazer?",
                options: [
                    { text: "Conversar com a coordena√ß√£o ou o setor de atendimento antes de decidir.", correct: true },
                    { text: "Apenas solicitar o cancelamento da matr√≠cula no site (Art. 52).", correct: false }
                ],
                feedback_correct: `√ìtima orienta√ß√£o! O di√°logo pode resolver problemas e evitar decis√µes precipitadas. Ganhe ${POINTS.DECISAO_CORRETA} pontos.`,
                feedback_incorrect: `Cancelar √© um direito, mas a melhor op√ß√£o √© sempre buscar ajuda primeiro. Perca ${POINTS.DECISAO_INCORRETA} pontos.`
            }
        ];

        const eventChallenges = [
            { text: "Evento surpresa! Sua turma foi convidada para uma palestra com um especialista da sua √°rea. Ganhe 40 pontos de conhecimento!", points: 40 },
            { text: "Imprevisto no projeto! Um equipamento importante quebrou. Volte 3 casas para replanejar com a equipe.", move: -3 },
            { text: "Dia do Desafio! O Senac promoveu uma atividade cultural e sua participa√ß√£o foi incr√≠vel. Jogue o dado novamente!", play_again: true },
            { text: "Semana de provas! A press√£o aumentou. Fique uma rodada sem jogar para 'estudar' e se concentrar.", stuck: 1 }
        ];

        const specialSpaces = {
            5: { type: 'sorte', text: 'Atitude exemplar! Voc√™ prop√¥s melhorias no curso e respeitou a diversidade da turma, como manda o Art. 25. Ganhe 30 pontos e avance 2 casas!', bonus_move: 2 },
            15: { type: 'sorte', text: 'Conhecimento em dia! Voc√™ utilizou a biblioteca (Art. 17) para aprofundar seus estudos. Ganhe 30 pontos e avance 3 casas!', bonus_move: 3 },
            33: { type: 'sorte', text: 'Cidadania na pr√°tica! Sua participa√ß√£o ativa no Conselho Escolar (Art. 11) ajudou a construir uma escola melhor. Ganhe 30 pontos e avance 2 casas!', bonus_move: 2 },
            52: { type: 'sorte', text: 'Profissional de destaque! Seu desempenho no Est√°gio (Art. 38) foi excelente. Ganhe 30 pontos e avance 4 casas!', bonus_move: 4 },
            
            10: { type: 'reves', puzzleId: 0, penalty_text: "Tempo esgotado! Voc√™ perdeu 25 pontos e deve voltar 3 casas." },
            18: { type: 'reves', puzzleId: 1, penalty_text: "Tempo esgotado! Voc√™ perdeu 25 pontos e deve voltar 4 casas." },
            28: { type: 'reves', puzzleId: 2, penalty_text: "Tempo esgotado! Voc√™ perdeu 25 pontos e ficar√° 1 rodada sem jogar." },
            38: { type: 'reves', puzzleId: 3, penalty_text: "Tempo esgotado! Voc√™ perdeu 25 pontos e deve voltar 5 casas." },
            44: { type: 'reves', puzzleId: 4, penalty_text: "Tempo esgotado! Voc√™ perdeu 25 pontos e deve voltar 2 casas." },
            55: { type: 'reves', puzzleId: 5, penalty_text: "Tempo esgotado! Voc√™ perdeu 25 pontos e deve voltar 3 casas." },

            8: { type: 'decisao', decisionId: 0 },
            25: { type: 'decisao', decisionId: 1 },
            35: { type: 'decisao', decisionId: 2 },
            49: { type: 'decisao', decisionId: 3 },

            22: { type: 'evento', eventId: 0 },
            30: { type: 'evento', eventId: 1 },
            40: { type: 'evento', eventId: 2 },
            48: { type: 'evento', eventId: 3 },
        };

        let players = [];
        let currentPlayerIndex = 0;
        let isGameActive = true;
        let availableQuizIndices = [];

        const gameSetupEl = document.getElementById('game-setup');
        const gameContainerEl = document.getElementById('game-container');
        const playerCountSelect = document.getElementById('player-count');
        const playerNamesContainer = document.getElementById('player-names');
        const startGameBtn = document.getElementById('start-game-btn');
        const boardEl = document.getElementById('board');
        const playersPanelEl = document.getElementById('players-panel');
        const turnInfoEl = document.getElementById('turn-info');
        const rollDiceBtn = document.getElementById('roll-dice-btn');
        const restartGameBtn = document.getElementById('restart-game-btn');
        const diceFaceEl = document.getElementById('dice-face');
        const modalEl = document.getElementById('modal');
        const modalContentEl = document.getElementById('modal-content');

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function setupQuizDeck() {
            availableQuizIndices = quizQuestions.map((_, index) => index);
            shuffle(availableQuizIndices);
        }

        function getNextQuestionId() {
            if (availableQuizIndices.length === 0) {
                setupQuizDeck();
            }
            return availableQuizIndices.pop();
        }

        function createBoard() {
            let html = '';
            // Simplified loop for 60 spaces
            for (let i = 0; i < boardSpaces; i++) {
                const spaceData = specialSpaces[i] || { type: 'quiz' };
                let icon = getIcon(spaceData.type);
                let content = i;

                if (i === 0) {
                    icon = 'üèÅ';
                    content = icon;
                } else if (i === boardSpaces - 1) {
                    icon = 'üèÜ';
                    content = icon;
                } else if (icon) {
                    content = `<span>${icon}</span>`;
                }

                const spaceClass = i === 0 ? 'space-start' : (i === boardSpaces - 1 ? 'space-finish' : `space-${spaceData.type}`);

                html += `<div id="space-${i}" data-space-type="${spaceData.type}" class="board-space ${spaceClass}">${content}</div>`;
            }
            boardEl.innerHTML = html;
        }


        function getIcon(type){
            const icons = {
                sorte: '‚≠ê',
                reves: '‚ö†Ô∏è',
                quiz: '‚ùì',
                decisao: 'üß≠',
                evento: 'üìÖ'
            };
            return icons[type] || '';
        }
        
        function updatePlayerNamesInput() {
            const count = parseInt(playerCountSelect.value);
            playerNamesContainer.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.id = `player-name-${i}`;
                input.placeholder = `Nome do Jogador ${i + 1}`;
                input.className = 'w-full p-2 border border-gray-300 rounded-md';
                input.style.borderColor = playerColors[i];
                playerNamesContainer.appendChild(input);
            }
        }

        function setupGame() {
            const count = parseInt(playerCountSelect.value);
            players = [];
            for (let i = 0; i < count; i++) {
                const nameInput = document.getElementById(`player-name-${i}`);
                players.push({ name: nameInput.value || `Jogador ${i + 1}`, position: 0, color: playerColors[i], isStuck: 0, score: 0 });
            }
            setupQuizDeck();
            gameSetupEl.classList.add('hidden');
            gameContainerEl.classList.remove('hidden');
            createBoard();
            createPlayerPawns();
            updatePlayersPanel();
            updateTurnInfo();
            isGameActive = true;
            rollDiceBtn.disabled = false;
        }

        function createPlayerPawns() {
            players.forEach((player, index) => {
                const pawn = document.createElement('div');
                pawn.id = `pawn-${index}`;
                pawn.className = 'player-pawn';
                pawn.style.backgroundColor = player.color;
                const offset = (index * 25) + 12.5;
                pawn.style.left = `calc(${offset}% - 12.5%)`;
                pawn.style.top = `calc(50% - 12.5%)`;
                document.getElementById('space-0').appendChild(pawn);
            });
        }
        
        function rollDice() {
            if (!isGameActive) return;
            rollDiceBtn.disabled = true;
            const roll = Math.floor(Math.random() * 6) + 1;
            diceFaceEl.className = `dice-${roll}`;
            setTimeout(() => movePlayer(roll), 500);
        }

        function movePlayer(steps) {
            const player = players[currentPlayerIndex];
            player.position += steps;

            if (player.position >= boardSpaces - 1) {
                player.position = boardSpaces - 1;
                player.score += POINTS.FINISH_BONUS;
                updatePawnPosition(player, currentPlayerIndex);
                setTimeout(endGameAndShowWinner, 700);
                return;
            }
            updatePawnPosition(player, currentPlayerIndex);
            setTimeout(() => handleSpaceAction(player.position), 700);
        }
        
        function endGameAndShowWinner() {
            isGameActive = false;
            rollDiceBtn.disabled = true;
            const winner = players.reduce((prev, current) => (prev.score > current.score) ? prev : current);
            showWinnerScreen(winner);
        }

        function updatePawnPosition(player, index) {
            const pawn = document.getElementById(`pawn-${index}`);
            const targetSpace = document.getElementById(`space-${player.position}`);
            const offset = (index * 25) + 12.5;
            pawn.style.left = `calc(${offset}% - 12.5%)`;
            pawn.style.top = `calc(50% - 12.5%)`;
            if(targetSpace) targetSpace.appendChild(pawn);
            updatePlayersPanel();
        }

        function handleSpaceAction(position) {
            let spaceData = specialSpaces[position];
            if (!spaceData) {
                spaceData = { type: 'quiz' };
            }

            switch(spaceData.type) {
                case 'sorte':
                    players[currentPlayerIndex].score += POINTS.SORTE;
                    showCard('Sorte!', spaceData.text, '#4ade80');
                    handleSorteEffect(spaceData);
                    break;
                case 'reves':
                    showPuzzle(spaceData.puzzleId);
                    break;
                case 'decisao':
                    showDecision(spaceData.decisionId);
                    break;
                case 'evento':
                    handleEvent(spaceData.eventId);
                    break;
                case 'quiz':
                    showQuiz(getNextQuestionId());
                    break;
            }
            updatePlayersPanel();
        }
        
        function handleEvent(eventId){
            const player = players[currentPlayerIndex];
            const event = eventChallenges[eventId];
            showCard("Evento Acad√™mico!", event.text, '#7dd3fc');

            if(event.points) player.score += event.points;
            if(event.move) player.position += event.move;
            if(event.stuck) player.isStuck = event.stuck;
            
            setTimeout(() => {
                updatePawnPosition(player, currentPlayerIndex);
                updatePlayersPanel();
                if(event.play_again) {
                    rollDiceBtn.disabled = false;
                } else {
                    nextTurn();
                }
            }, 1500);
        }

        function handleSorteEffect(special) {
            const player = players[currentPlayerIndex];
            if (special.bonus_move) {
                player.position += special.bonus_move;
            }
            setTimeout(() => {
                if (player.position >= boardSpaces - 1) {
                     player.position = boardSpaces -1;
                     endGameAndShowWinner();
                } else {
                    updatePawnPosition(player, currentPlayerIndex);
                    updatePlayersPanel();
                    nextTurn();
                }
            }, 1500);
        }

        function applyRevesPenalty(puzzleId) {
            if (puzzleTimer) {
                clearInterval(puzzleTimer);
                puzzleTimer = null;
            }
            const player = players[currentPlayerIndex];
            const special = specialSpaces[Object.keys(specialSpaces).find(key => specialSpaces[key].puzzleId === puzzleId)];
            
            player.score += POINTS.REVES_FAIL;
            if(player.score < 0) player.score = 0;

            const penaltyText = special.penalty_text;
            if (penaltyText.includes('volte')) {
                const steps = parseInt(penaltyText.match(/(\d+)/)[0]);
                player.position -= steps;
                if(player.position < 0) player.position = 0;
            }
            if (penaltyText.includes('Fique 1 rodada sem jogar')) {
                player.isStuck = 1;
            }

            showCard('Penalidade!', penaltyText, '#f87171');
            setTimeout(() => {
                updatePawnPosition(player, currentPlayerIndex);
                updatePlayersPanel();
                nextTurn();
            }, 1500);
        }

        function nextTurn() {
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            updateTurnInfo();
            const nextPlayer = players[currentPlayerIndex];
            if (nextPlayer.isStuck > 0) {
                nextPlayer.isStuck--;
                setTimeout(() => {
                    showCard('Aguarde!', `${nextPlayer.name} est√° de "molho" nesta rodada.`, '#a1a1aa');
                    nextTurn();
                }, 500);
            } else {
                rollDiceBtn.disabled = false;
            }
        }
        
        function updatePlayersPanel() {
            playersPanelEl.innerHTML = players.map((p, i) => `
                <div id="player-info-${i}" class="player-info p-3 rounded-lg border-2 flex items-center justify-between transition-all duration-300" style="border-color: ${p.color};">
                    <div class="flex items-center"><div class="w-5 h-5 rounded-full mr-3" style="background-color: ${p.color};"></div><span class="font-bold text-lg">${p.name}</span></div>
                    <div class="text-right"><span class="font-semibold text-gray-700 block">Casa: ${p.position}</span><span class="font-bold text-[#005594] block">Pontos: ${p.score}</span></div>
                </div>`).join('');
            document.querySelectorAll('.player-info').forEach(el => el.classList.remove('active'));
            document.getElementById(`player-info-${currentPlayerIndex}`).classList.add('active');
        }

        function updateTurnInfo() {
            const player = players[currentPlayerIndex];
            turnInfoEl.textContent = `√â a vez de ${player.name}`;
            turnInfoEl.style.color = player.color;
        }

        function showCard(title, text, color) {
            modalContentEl.innerHTML = `<h2 class="text-3xl font-bold mb-4" style="color: ${color};">${title}</h2><p class="text-xl text-gray-700 mb-6">${text}</p><button onclick="closeModal()" class="bg-gray-700 text-white py-2 px-6 rounded-lg font-semibold hover:bg-gray-800">OK</button>`;
            openModal();
        }

        function showQuiz(questionId) {
            const q = quizQuestions[questionId];
            modalContentEl.innerHTML = `<h2 class="text-3xl font-bold mb-4 text-[#818cf8]">Pergunta Quiz!</h2><p class="text-xl text-gray-700 mb-6">${q.question}</p><div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-6">${q.options.map((opt, i) => `<button class="p-3 border-2 border-gray-300 rounded-lg hover:bg-gray-100" onclick="checkAnswer(${questionId}, ${i})">${opt}</button>`).join('')}</div>`;
            openModal();
        }

        function showPuzzle(puzzleId) {
            const p = puzzleChallenges[puzzleId];
            modalContentEl.innerHTML = `
                <h2 class="text-3xl font-bold mb-4 text-[#f87171]">Puzzle de Rev√©s!</h2>
                <div id="puzzle-timer" class="text-5xl font-bold text-red-500 mb-3">30</div>
                <p class="text-lg text-gray-600 mb-2">Desembaralhe a palavra para evitar a penalidade!</p>
                <p class="text-3xl font-bold tracking-widest my-4 bg-gray-100 p-3 rounded">${p.puzzle}</p>
                <p class="text-sm text-gray-500 mb-4">Dica: ${p.hint}</p>
                <input id="puzzle-input" class="w-full p-2 border border-gray-400 rounded-md mb-4 text-center uppercase" type="text" autocomplete="off">
                <button id="check-puzzle-btn" onclick="checkPuzzleAnswer(${puzzleId})" class="w-full bg-[#f87171] text-white py-2 px-6 rounded-lg font-semibold hover:bg-red-600">Verificar Resposta</button>`;
            openModal();

            let timeLeft = 30;
            const timerEl = document.getElementById('puzzle-timer');
            puzzleTimer = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                    applyRevesPenalty(puzzleId);
                }
            }, 1000);
        }
        
        function showDecision(decisionId) {
            const d = decisionChallenges[decisionId];
            modalContentEl.innerHTML = `
                <h2 class="text-3xl font-bold mb-4 text-[#fb923c]">Decis√£o de Carreira</h2>
                <p class="text-xl text-gray-700 mb-6">${d.scenario}</p>
                <div class="grid grid-cols-1 gap-3 mb-6">
                    ${d.options.map((opt, i) => `<button class="p-3 border-2 border-gray-300 rounded-lg hover:bg-gray-100" onclick="checkDecision(${decisionId}, ${i})">${opt.text}</button>`).join('')}
                </div>`;
            openModal();
        }

        window.checkDecision = function(decisionId, selectedIndex) {
            const d = decisionChallenges[decisionId];
            const player = players[currentPlayerIndex];
            const choice = d.options[selectedIndex];

            if(choice.correct) {
                player.score += POINTS.DECISAO_CORRETA;
                showCard("Decis√£o Correta!", d.feedback_correct, '#4ade80');
            } else {
                player.score += POINTS.DECISAO_INCORRETA;
                if(player.score < 0) player.score = 0;
                showCard("Decis√£o Incorreta!", d.feedback_incorrect, '#f87171');
            }
            updatePlayersPanel();
            setTimeout(nextTurn, 1500);
        }

        window.checkAnswer = function(questionId, selectedIndex) {
            const q = quizQuestions[questionId];
            const player = players[currentPlayerIndex];
            if(selectedIndex === q.correct) {
                player.score += POINTS.QUIZ_CORRECT;
                showCard('Resposta Correta!', `Voc√™ ganhou ${POINTS.QUIZ_CORRECT} pontos!`, '#4ade80');
            } else {
                showCard('Resposta Incorreta!', `A resposta certa era: "${q.options[q.correct]}".`, '#f87171');
            }
            updatePlayersPanel();
            setTimeout(nextTurn, 1500);
        }

        window.checkPuzzleAnswer = function(puzzleId) {
            if (puzzleTimer) {
                clearInterval(puzzleTimer);
                puzzleTimer = null;
            }
            const p = puzzleChallenges[puzzleId];
            const input = document.getElementById('puzzle-input');
            const checkBtn = document.getElementById('check-puzzle-btn');
            if(checkBtn) checkBtn.disabled = true;

            if (input.value.toUpperCase() === p.solution) {
                showCard('Ufa!', 'Voc√™ resolveu o puzzle e escapou da penalidade!', '#4ade80');
                setTimeout(nextTurn, 1500);
            } else {
                applyRevesPenalty(puzzleId);
            }
        }

        function showWinnerScreen(winner) {
            modalContentEl.innerHTML = `
                <h2 class="text-4xl font-bold mb-4 text-[#f08324]">Fim de Jogo!</h2>
                <p class="text-2xl text-gray-800 mb-6">O jogador com mais pontos √© o vencedor!</p>
                <div class="bg-yellow-100 border-2 border-yellow-400 rounded-lg p-4 mb-6 text-center"><p class="text-xl text-gray-800">Parab√©ns,</p><p class="text-3xl font-extrabold" style="color: ${winner.color};">${winner.name}!</p><p class="text-2xl font-bold">${winner.score} Pontos</p></div>
                <h3 class="text-xl font-bold mb-2">Placar Final:</h3>
                <div class="space-y-2 text-left max-w-sm mx-auto mb-8">${players.sort((a,b) => b.score - a.score).map(p => `<div class="flex justify-between items-center p-2 rounded-md" style="background-color: ${p.color}20;"><span class="font-semibold" style="color: ${p.color};">${p.name}</span><span class="font-bold">${p.score} Pontos</span></div>`).join('')}</div>
                <button onclick="window.location.reload()" class="bg-[#005594] text-white py-3 px-8 rounded-lg font-bold text-lg hover:bg-blue-800">Jogar Novamente</button>`;
            openModal();
        }

        function openModal() {
            modalEl.classList.remove('hidden');
            setTimeout(() => {
                modalEl.classList.remove('opacity-0');
                modalContentEl.classList.remove('scale-95');
            }, 10);
        }

        window.closeModal = function() {
            if (puzzleTimer) {
                clearInterval(puzzleTimer);
                puzzleTimer = null;
            }
            modalEl.classList.add('opacity-0');
            modalContentEl.classList.add('scale-95');
            setTimeout(() => modalEl.classList.add('hidden'), 300);
        }

        playerCountSelect.addEventListener('change', updatePlayerNamesInput);
        startGameBtn.addEventListener('click', setupGame);
        rollDiceBtn.addEventListener('click', rollDice);
        restartGameBtn.addEventListener('click', () => window.location.reload());
        updatePlayerNamesInput();
    </script>
</body>
</html>
